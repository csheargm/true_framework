<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRUE Framework - Debug Version</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .hidden { display: none; }
        .score { font-weight: bold; color: blue; }
    </style>
</head>
<body>
    <h1>TRUE Framework - Simple Debug Version</h1>
    
    <div class="section">
        <h2>Select Model</h2>
        <select id="model">
            <option value="">-- Choose --</option>
            <option value="mistral">Mistral-7B</option>
            <option value="llama">LLaMA 2</option>
        </select>
        <button onclick="startEval()">Start Evaluation</button>
    </div>

    <div id="scoring" class="section hidden">
        <h2>Evaluation for: <span id="model-name"></span></h2>
        
        <h3>Transparent (10 pts max)</h3>
        <label><input type="checkbox" value="2" onchange="updateScore()"> Open license (2pts)</label><br>
        <label><input type="checkbox" value="2" onchange="updateScore()"> Model weights (2pts)</label><br>
        <label><input type="checkbox" value="2" onchange="updateScore()"> Inference code (2pts)</label><br>
        <label><input type="checkbox" value="2" onchange="updateScore()"> Training code (2pts)</label><br>
        <label><input type="checkbox" value="2" onchange="updateScore()"> Dataset disclosed (2pts)</label><br>
        
        <h3>Total Score: <span id="score" class="score">0</span>/30</h3>
        
        <button onclick="saveEval()">Save Evaluation</button>
        <button onclick="resetEval()">Reset</button>
    </div>

    <div class="section">
        <h3>Saved Evaluations</h3>
        <div id="saved-list">None yet</div>
    </div>

    <script>
        function startEval() {
            const model = document.getElementById('model').value;
            if (!model) {
                alert('Please select a model');
                return;
            }
            
            document.getElementById('model-name').textContent = model;
            document.getElementById('scoring').classList.remove('hidden');
            console.log('Evaluation started for:', model);
        }
        
        function updateScore() {
            let total = 0;
            document.querySelectorAll('input[type="checkbox"]:checked').forEach(cb => {
                total += parseInt(cb.value);
            });
            document.getElementById('score').textContent = total;
            console.log('Score updated:', total);
        }
        
        function saveEval() {
            const model = document.getElementById('model-name').textContent;
            const score = document.getElementById('score').textContent;
            
            const saved = JSON.parse(localStorage.getItem('evaluations') || '[]');
            saved.push({
                model: model,
                score: score,
                date: new Date().toLocaleString()
            });
            localStorage.setItem('evaluations', JSON.stringify(saved));
            
            displaySaved();
            alert('Evaluation saved!');
            console.log('Saved:', model, score);
        }
        
        function resetEval() {
            document.getElementById('scoring').classList.add('hidden');
            document.getElementById('model').value = '';
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            updateScore();
        }
        
        function displaySaved() {
            const saved = JSON.parse(localStorage.getItem('evaluations') || '[]');
            if (saved.length === 0) {
                document.getElementById('saved-list').innerHTML = 'None yet';
            } else {
                document.getElementById('saved-list').innerHTML = saved.map(e => 
                    `${e.model}: ${e.score}/30 (${e.date})`
                ).join('<br>');
            }
        }
        
        // Load saved evaluations on start
        displaySaved();
        console.log('Debug version loaded successfully');
    </script>
</body>
</html>